webpackJsonp([8],{664:function(e,t,i){i(842),i(843);var a=i(1)(i(730),i(902),"data-v-bdd291f4",null);e.exports=a.exports},726:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(93),r=i.n(a);t.default={components:{InlineDesc:r.a},computed:{labelStyle:function(){var e=/<\/?[^>]*>/.test(this.title);return{display:"block",width:Math.min(e?5:this.title.length+1,14)+"em"}}},props:{title:{type:String,required:!0},disabled:Boolean,value:{type:Boolean,default:!1},inlineDesc:[String,Boolean,Number]},data:function(){return{currentValue:this.value}},watch:{currentValue:function(e){this.$emit("input",e),this.$emit("on-change",e)},value:function(e){this.currentValue=e}}}},730:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(73),r=i.n(a),n=i(72),o=i.n(n),s=i(61),c=i.n(s),l=i(94),u=i(916),d=i.n(u),p=i(71),w=i.n(p),b=i(52);t.default={name:"meal-order",components:{Scroller:w.a,XSwitch:d.a},mixins:[l.d,l.c],data:function(){return{purchase:!1,datetime:"请选择"}},computed:c()({},i.i(b.a)(["meal"]),{totalPrice:function(){return this.meal.price}}),beforeRouteEnter:function(e,t,i){i(function(e){"/order"!==t.path&&e.initPurchase()})},methods:{initPurchase:function(){this.purchase=!1},sendOrder:function(){var e=this;return o()(r.a.mark(function t(){var i,a,n,o,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.paying){t.next=2;break}return t.abrupt("return");case 2:if(e.isHybird||"wx"!==e.payway||e.isWeixin){t.next=5;break}return e.toast("微信支付不可用"),t.abrupt("return");case 5:if("请选择"!==(i=e.datetime)){t.next=9;break}return e.toast("请选择服务时间"),t.abrupt("return");case 9:return e.paying=!0,a=e.datetime.substring(0,10),n=e.datetime.substring(11,17),o=e.oftenAddress,s=void 0,"wx"===e.payway&&(s="/wxaction/addOrder.do"),"balance"===e.payway&&(s="/wxaction/createOrderAndPayByAccount"),t.next=18,e.$http.post(s).send({wares:[{id:e.meal.id,quantity:1}],sendDate:a,sendTime:n,contactPerson:o.person,contactPhone:o.telephone,provice:o.province,city:o.city,area:o.area,street:o.street,ingredients:e.purchase?"purchase":"owned",note:e.note,payType:e.payway,orderType:"meal"}).then(e.handleSparePay).catch(e.handleError);case 18:e.paying=!1;case 19:case"end":return t.stop()}},t,e)}))()},today:function(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate();return i<10&&(i="0"+i),a<10&&(a="0"+a),t+"-"+i+"-"+a},endDate:function(){var e=new Date,t=e.getFullYear(),i=e.getMonth(),a=e.getDate(),r=new Date(t,i,a+30),n=r.getFullYear(),o=r.getMonth()+1,s=r.getDate();return o<10&&(o="0"+o),s<10&&(s="0"+s),n+"-"+o+"-"+s}}}},764:function(e,t,i){t=e.exports=i(659)(!1),t.push([e.i,'.weui-label{display:block;width:105px;word-wrap:break-word;word-break:break-all}.weui-input{width:100%;border:0;outline:0;-webkit-appearance:none;background-color:transparent;font-size:inherit;color:inherit;height:1.41176471em;line-height:1.41176471}.weui-input::-webkit-inner-spin-button,.weui-input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.weui-textarea{display:block;border:0;resize:none;width:100%;color:inherit;font-size:1em;line-height:inherit;outline:0}.weui-textarea-counter{color:#b2b2b2;text-align:right}.weui-cell_warn .weui-textarea-counter{color:#e64340}.weui-toptips{display:none;position:fixed;-webkit-transform:translateZ(0);transform:translateZ(0);top:0;left:0;right:0;padding:5px;font-size:14px;text-align:center;color:#fff;z-index:5000;word-wrap:break-word;word-break:break-all}.weui-toptips_warn{background-color:#e64340}.weui-cells_form .weui-cell__ft{font-size:0}.weui-cells_form .weui-icon-warn{display:none}.weui-cells_form input,.weui-cells_form label[for],.weui-cells_form textarea{-webkit-tap-highlight-color:rgba(0,0,0,0)}.weui-cell_warn{color:#e64340}.weui-cell_warn .weui-icon-warn{display:inline-block}.weui-cell_switch{padding-top:6px;padding-bottom:6px}.weui-switch{-webkit-appearance:none;-moz-appearance:none;appearance:none}.weui-switch,.weui-switch-cp__box{position:relative;width:52px;height:32px;border:1px solid #dfdfdf;outline:0;border-radius:16px;box-sizing:border-box;background-color:#dfdfdf;-webkit-transition:background-color .1s,border .1s;transition:background-color .1s,border .1s}.weui-switch-cp__box:before,.weui-switch:before{content:" ";position:absolute;top:0;left:0;width:50px;height:30px;border-radius:15px;background-color:#fdfdfd;-webkit-transition:-webkit-transform .35s cubic-bezier(.45,1,.4,1);transition:-webkit-transform .35s cubic-bezier(.45,1,.4,1);transition:transform .35s cubic-bezier(.45,1,.4,1);transition:transform .35s cubic-bezier(.45,1,.4,1),-webkit-transform .35s cubic-bezier(.45,1,.4,1)}.weui-switch-cp__box:after,.weui-switch:after{content:" ";position:absolute;top:0;left:0;width:30px;height:30px;border-radius:15px;background-color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.4);-webkit-transition:-webkit-transform .35s cubic-bezier(.4,.4,.25,1.35);transition:-webkit-transform .35s cubic-bezier(.4,.4,.25,1.35);transition:transform .35s cubic-bezier(.4,.4,.25,1.35);transition:transform .35s cubic-bezier(.4,.4,.25,1.35),-webkit-transform .35s cubic-bezier(.4,.4,.25,1.35)}.weui-switch-cp__input:checked~.weui-switch-cp__box,.weui-switch:checked{border-color:#e75142;background-color:#e75142}.weui-switch-cp__input:checked~.weui-switch-cp__box:before,.weui-switch:checked:before{-webkit-transform:scale(0);transform:scale(0)}.weui-switch-cp__input:checked~.weui-switch-cp__box:after,.weui-switch:checked:after{-webkit-transform:translateX(20px);transform:translateX(20px)}.weui-switch-cp__input{position:absolute;left:-9999px}.weui-switch-cp__box{display:block}.weui-cell_switch .weui-cell__ft{font-size:0}input.weui-switch[disabled]{opacity:.6}.vux-x-switch.weui-cell_switch{padding-top:6px;padding-bottom:6px}',""])},795:function(e,t,i){t=e.exports=i(659)(!1),t.push([e.i,".meal-order .vux-no-group-title{margin-top:0}.meal-order .vux-spinner{stroke:#fff;fill:#fff}.meal-order .weui-switch{position:relative;top:6px}.meal-order .vux-x-switch.weui-cell_switch{padding-top:4px;padding-bottom:4px}.meal-order .active .weui-cell__ft{color:#333}.meal-order .red .weui-cell__ft{color:#e75142}.meal-order .weui-cells__title{font-size:15px;margin-bottom:.77em}.meal-order .weui-textarea{font-size:16px;color:#333}",""])},796:function(e,t,i){t=e.exports=i(659)(!1),t.push([e.i,".content-wrap[data-v-bdd291f4]{bottom:49px}.meal[data-v-bdd291f4]{width:90px;height:90px;margin:17px 15px;border-radius:2px;overflow:hidden;position:relative}.meal span[data-v-bdd291f4]{display:block;width:100%;position:absolute;bottom:0;text-align:center;background-color:rgba(0,0,0,.6);color:#fff;font-size:11px;line-height:2.2}.meal img[data-v-bdd291f4]{width:100%;height:100%}.function-list .weui-cell[data-v-bdd291f4]{line-height:30px}.phone-wrap[data-v-bdd291f4]{text-align:center;padding-top:15px;padding-bottom:30px;color:#999;font-size:12px}.phone[data-v-bdd291f4]{color:#e75142}.bar[data-v-bdd291f4]{width:100%;height:49px;line-height:49px;position:absolute;bottom:0;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.total-price[data-v-bdd291f4]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;font-size:16px;padding-left:15px}.total-price .price[data-v-bdd291f4]{color:#e75142}.order[data-v-bdd291f4]{width:100px;text-align:center;background-color:#e75142;color:#fff;font-size:16px}",""])},811:function(e,t,i){var a=i(764);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(660)("4e2fd7b2",a,!0)},842:function(e,t,i){var a=i(795);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(660)("c7369ba2",a,!0)},843:function(e,t,i){var a=i(796);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(660)("c5373d7e",a,!0)},878:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vux-x-switch weui-cell weui-cell_switch"},[i("div",{staticClass:"weui-cell__bd"},[i("label",{staticClass:"weui-label",style:e.labelStyle,domProps:{innerHTML:e._s(e.title)}}),e._v(" "),e.inlineDesc?i("inline-desc",[e._v(e._s(e.inlineDesc))]):e._e()],1),e._v(" "),i("div",{staticClass:"weui-cell__ft"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"weui-switch",attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:Array.isArray(e.currentValue)?e._i(e.currentValue,null)>-1:e.currentValue},on:{__c:function(t){var i=e.currentValue,a=t.target,r=!!a.checked;if(Array.isArray(i)){var n=e._i(i,null);r?n<0&&(e.currentValue=i.concat(null)):n>-1&&(e.currentValue=i.slice(0,n).concat(i.slice(n+1)))}else e.currentValue=r}}})])])},staticRenderFns:[]}},902:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mdc meal-order"},[i("scroller",{ref:"scroller",attrs:{"lock-x":"lock-x",height:e.isWeixin?"-49":"-95"}},[i("div",{staticClass:"content"},[i("address-choose",{attrs:{address:e.oftenAddress}}),i("div",{staticClass:"meal"},[i("span",[e._v(e._s(e.meal.name)),e.meal.quantity>1?i("i",[e._v(" x"+e._s(e.meal.quantity))]):e._e()]),i("img",{attrs:{src:e.assets_base_uri+e.meal.img}})]),i("group",{staticClass:"function-list"},[i("x-switch",{attrs:{title:"食材代买"},model:{value:e.purchase,callback:function(t){e.purchase=t},expression:"purchase"}}),i("datetime",{class:{active:"请选择"!==e.datetime},attrs:{format:"YYYY-MM-DD HH:mm","min-hour":9,"max-hour":18,title:"服务时间",required:!0,"start-date":e.today(),"end-date":e.endDate(),"confirm-text":"确认","cancel-text":"取消","year-row":"{value}年","month-row":"{value}月","day-row":"{value}日","hour-row":"{value}时","minute-row":"{value}分"},model:{value:e.datetime,callback:function(t){e.datetime=t},expression:"datetime"}}),i("cell",{attrs:{title:"优惠券",value:"无可用","is-link":"is-link"}}),i("cell",{staticClass:"active",attrs:{title:"支付方式",value:"wx"===e.payway?"微信支付":"余额","is-link":"is-link"},nativeOn:{click:function(t){e.showSheet=!0}}}),i("cell",{class:{active:e.user.userBalance>=e.totalPrice},attrs:{title:"账户余额"}},[e._v("￥"+e._s(e.user.userBalance||0))]),i("cell",{staticClass:"red",attrs:{title:"服务价格"}},[e._v("￥"+e._s(e.totalPrice&&e.totalPrice.toFixed(2)))])],1),i("group",{attrs:{title:"备注信息"}},[i("x-textarea",{attrs:{rows:5,placeholder:"请输入备注信息"},on:{"on-focus":e.handleFocus,"on-blur":e.handleBlur},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1),i("div",{staticClass:"phone-wrap"},[i("span",[e._v("有疑问请拨打：")]),i("a",{staticClass:"phone",attrs:{href:"tel:400-005-4288"}},[e._v("400-005-4288")])])],1)]),i("div",{staticClass:"bar vux-1px-t"},[i("div",{staticClass:"total-price"},[i("span",{staticClass:"total"},[e._v("合计：")]),i("span",{staticClass:"price"},[e._v("￥"+e._s(e.totalPrice))])]),i("div",{staticClass:"order",on:{click:e.sendOrder}},[i("spinner",{directives:[{name:"show",rawName:"v-show",value:e.paying,expression:"paying"}],attrs:{type:"dots"}}),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.paying,expression:"!paying"}]},[e._v("提交订单")])],1)]),i("actionsheet",{attrs:{menus:e.paywayList,"show-cancel":"show-cancel"},on:{"on-click-menu":e.changePayway},model:{value:e.showSheet,callback:function(t){e.showSheet=t},expression:"showSheet"}})],1)},staticRenderFns:[]}},916:function(e,t,i){i(811);var a=i(1)(i(726),i(878),null,null);e.exports=a.exports}});