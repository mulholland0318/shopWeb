webpackJsonp([13],{686:function(e,t,a){a(821),a(822);var r=a(1)(a(752),a(885),"data-v-4fbc91a3",null);e.exports=r.exports},752:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(73),i=a.n(r),o=a(72),s=a.n(o),n=a(61),c=a.n(n),l=a(94),p=a(71),d=a.n(p),u=a(52);t.default={name:"ware-order",mixins:[l.d,l.c],components:{Scroller:d.a},computed:c()({},a.i(u.a)(["wares"]),{totalPrice:function(){return this.wares.reduce(function(e,t){return e+t.goods.price*t.quantity},0)}}),mounted:function(){this.checkType()},activated:function(){this.setQuantity()},methods:{checkType:function(){var e=this.$route.query.from,t=this.wares;return e?"shopcar"!==e||t.length?void("ware"!==e||t.length||this.$router.replace("/ware/"+this.$route.query.id)):void this.$router.replace("/shopcar"):void this.$router.replace("/")},setQuantity:function(){var e=this.$route.query.quantity;e&&(this.wares[0].quantity=e)},sendOrder:function(){var e=this;return s()(i.a.mark(function t(){var a,r,o,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.paying){t.next=2;break}return t.abrupt("return");case 2:if(e.isHybird||"wx"!==e.payway||e.isWeixin){t.next=5;break}return e.toast("暂时仅可在微信中下单"),t.abrupt("return");case 5:return e.paying=!0,a=e.oftenAddress,r=e.$route.query.from,o=e.wares.map(function(e){return{id:e.goods.id,quantity:e.quantity}}),s=void 0,"wx"===e.payway&&(s="/wxaction/addOrder.do"),"balance"===e.payway&&(s="/wxaction/createOrderAndPayByAccount"),t.next=14,e.$http.post(s).send({wares:o,contactPerson:a.person,contactPhone:a.telephone,provice:a.province,city:a.city,area:a.area,street:a.street,note:e.note,payType:e.payway,orderType:r}).then(e.handleSparePay).catch(e.handleError);case 14:e.paying=!1;case 15:case"end":return t.stop()}},t,e)}))()}}}},774:function(e,t,a){t=e.exports=a(659)(!1),t.push([e.i,".ware-order .vux-no-group-title{margin-top:0}.ware-order .vux-spinner{stroke:#fff;fill:#fff}.ware-order .active .weui-cell__ft{color:#333!important}.ware-order .red .weui-cell__ft{color:#e75142!important}.ware-order .weui-cells__title{font-size:15px;margin-bottom:.77em}.ware-order .weui-textarea{font-size:16px;color:#333}",""])},775:function(e,t,a){t=e.exports=a(659)(!1),t.push([e.i,".content[data-v-4fbc91a3]{bottom:49px}.wares-wrap[data-v-4fbc91a3]{width:100%;margin-top:10px;overflow:scroll;-webkit-overflow-scrolling:touch;background-color:#fff}.wares[data-v-4fbc91a3]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0 7px}.ware-item[data-v-4fbc91a3]{width:90px;height:90px;margin:17px 7px;border-radius:2px;overflow:hidden;position:relative}.ware-item span[data-v-4fbc91a3]{display:block;width:100%;position:absolute;bottom:0;text-align:center;background-color:rgba(0,0,0,.6);color:#fff;font-size:11px;line-height:2.2}.ware-item img[data-v-4fbc91a3]{width:100%;height:100%}.function-list .weui-cell[data-v-4fbc91a3]{line-height:30px}.phone-wrap[data-v-4fbc91a3]{text-align:center;padding-top:15px;padding-bottom:30px;color:#999;font-size:12px}.phone[data-v-4fbc91a3]{color:#e75142}.bar[data-v-4fbc91a3]{width:100%;height:49px;line-height:49px;position:absolute;bottom:0;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.total-price[data-v-4fbc91a3]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;font-size:16px;padding-left:15px}.total-price .price[data-v-4fbc91a3]{color:#e75142}.order[data-v-4fbc91a3]{width:100px;text-align:center;background-color:#e75142;color:#fff;font-size:16px}",""])},821:function(e,t,a){var r=a(774);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(660)("16488b3a",r,!0)},822:function(e,t,a){var r=a(775);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(660)("0e0e9346",r,!0)},885:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mdc ware-order"},[a("scroller",{ref:"scroller",attrs:{"lock-x":"lock-x",height:e.isWeixin?"-49":"-95"}},[a("div",{staticClass:"content"},[a("address-choose",{attrs:{address:e.oftenAddress}}),a("div",{staticClass:"wares-wrap"},[a("div",{staticClass:"wares",style:"width: "+104*e.wares.length+"px;"},e._l(e.wares,function(t){return a("div",{staticClass:"ware-item"},[a("span",[e._v(e._s(t.goods.name)),t.quantity>1?a("i",[e._v(" x"+e._s(t.quantity))]):e._e()]),a("img",{attrs:{src:e.assets_base_uri+t.goods.img}})])}))]),a("group",{staticClass:"function-list"},[a("cell",{staticClass:"active",attrs:{title:"支付方式",value:"wx"===e.payway?"微信支付":"余额","is-link":"is-link"},nativeOn:{click:function(t){e.showSheet=!0}}}),a("cell",{attrs:{title:"优惠券",value:"无可用","is-link":"is-link"}}),a("cell",{class:{active:e.user.userBalance>=e.totalPrice},attrs:{title:"账户余额"}},[e._v("￥"+e._s(e.user.userBalance||0))]),a("cell",{attrs:{title:"商品价格"}},[e._v("￥"+e._s(e.totalPrice&&e.totalPrice.toFixed(2)))])],1),a("group",{attrs:{title:"备注信息"}},[a("x-textarea",{attrs:{rows:5,placeholder:"请输入备注信息"},on:{"on-focus":e.handleFocus,"on-blur":e.handleBlur},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1),a("div",{staticClass:"phone-wrap"},[a("span",[e._v("有疑问请拨打：")]),a("a",{staticClass:"phone",attrs:{href:"tel:400-005-4288"}},[e._v("400-005-4288")])])],1)]),a("div",{staticClass:"bar vux-1px-t"},[a("div",{staticClass:"total-price"},[a("span",{staticClass:"total"},[e._v("合计：")]),a("span",{staticClass:"price"},[e._v("￥"+e._s(e.totalPrice&&e.totalPrice.toFixed(2)))])]),a("div",{staticClass:"order",on:{click:e.sendOrder}},[a("spinner",{directives:[{name:"show",rawName:"v-show",value:e.paying,expression:"paying"}],attrs:{type:"dots"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.paying,expression:"!paying"}]},[e._v("提交订单")])],1)]),a("actionsheet",{attrs:{menus:e.paywayList,"show-cancel":"show-cancel"},on:{"on-click-menu":e.changePayway},model:{value:e.showSheet,callback:function(t){e.showSheet=t},expression:"showSheet"}})],1)},staticRenderFns:[]}}});